////  main.c//  Pointer_C////  Created by zxz on 16/3/28.//  Copyright © 2016年 zxz. All rights reserved.//#include <stdio.h>#include <stdlib.h>#include <math.h>#include <string.h>// 泛型的交换值,注意字符串为数组，交换的时候要取地址。void mySwap(void *vp1,void *vp2,int size) {    char buffer[size];    memcpy(buffer, vp1, size);    memcpy(vp1, vp2, size);    memcpy(vp2, vp1, size);}// 数组查找//数组的匹配void *myLsearch(void *key,void *base,int count,int elemSize) {    for (int i=0; i<count; i++) {        void *eleAdrr = (char *)base + i * elemSize;        if (memcmp(key, eleAdrr, elemSize) == 0) {            return eleAdrr;        }    }    return NULL;}// generic search `*comFunction` 不加`*`也可以void *gereralLsearch(void *key,void *base,int count,int elemSize,int (*comFunction)(void *,void *)) {    for (int i=0; i<count; i++) {        void *eleAdrr = (char *)base + i * elemSize;        if (comFunction(key, eleAdrr) == 0) {            return eleAdrr;        }    }        return NULL;}// int数组的方法实现int intCom(void *ele1, void *ele2) {    //此处为了匹配上面的int (*comFunction)(void *,void *)，将void *类型强转为我们知道的int * 类型，让后取值比较。    int *p1 = ele1;    int *p2 = ele2;    return *p1 - *p2;}int strCom(void *ele1, void *ele2) {    char *s1 = *(char **)ele1; ///如果直接cast传过来的void * 将导致ele1被简析成char *类型,而不是string.    char *s2 = *(char **)ele2;    return strcmp(s1,s2); //strcmp 依次比较字符,直到遇到不同,返回ASCII码值的差值.}int main(int argc, const char * argv[]) {        // string lsearch test    char *strings[] = {"ab","cd","ad","cb"};    char *key = "cd";    char **found = gereralLsearch(&key, strings, 5, sizeof(char *), strCom);    if (*found != NULL) {        printf("Found key in strings! \n");    }        /// char* 在Xcode中是8个字节，int为4个，short为2个    int arr[5];    arr[3] = 128;    ((short*)arr)[6] = 2; //数组casting为short *    printf("%lu \n",sizeof((arr)));        for (int i=0 ;i<20 ;i++) {        printf("arr[%d]:%d \n",i,arr[i]);    }        ((short*) (( (char *)(&arr[1]) )+8))[3] = 100;        char* c = (char *)(&arr[1]);    printf("short:%lu \n",sizeof(short));    printf("((char *)(&arr[1]):%lu \n",sizeof(((char *)(&arr[1]))));    printf("&arr[1]:%p\n",  &arr[1]);    printf("c:%lu\n",sizeof(char *));    printf("c:%p \n",           c+2);    printf("c:%p \n",           c+3);            int* a = arr;    a += 1;    printf("%p \n",(char *)arr+1);    printf("%d \n",     *(arr+1));    printf("%p \n",       arr+1);    printf("%p \n",     &arr[0]);            typedef struct{        const char *name;        int         aage;        int         age;        short       year;    }Student;    Student Jim;    Jim.name = "Jim";    printf("Student:%lu \n",sizeof(Student)); //字节对齐，注意        //字符串交换的注意    char *s  = "123456789";    char *ss = "abcdefghjkl";    mySwap(&s, &ss, sizeof(char *));    printf("s:%s,\n ss:%s",s,ss);                return 0;}